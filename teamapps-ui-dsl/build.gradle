/*
 * This file was generated by the Gradle 'init' task.
 */

apply plugin: 'antlr'

dependencies {
    antlr 'org.antlr:antlr4:4.7.1'
    api "org.antlr:antlr4-runtime:4.7.1"
    api 'org.antlr:ST4:4.0.8'
    api 'com.googlecode.json-simple:json-simple:1.1.1'
    api 'org.apache.commons:commons-lang3:3.4'
    api "com.google.guava:guava:$guavaVersion"
}

description = 'TeamApps UI DSL'

// https://github.com/gradle/gradle/issues/820
configurations {
    compile {
        extendsFrom = extendsFrom.findAll { it != configurations.antlr }
    }
}

generateGrammarSource {
    maxHeapSize = "64m"
    outputDirectory = new File("${project.buildDir}/generated-src/antlr/main".toString())

//    // Keep a copy of generated sources
//    doLast {
//        println "Copying generated grammar lexer/parser files to main directory."
//        copy {
//            from "${buildDir}/generated-src/antlr/main"
//            into "generated-src/main/java"
//        }
//    }
}

clean.doLast {
    file('generated-src').deleteDir()
}